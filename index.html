<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="main.css">
	<script src="bower_components/underscore/underscore-min.js" type="text/javascript" charset="utf-8"></script>
	<script src="bower_components/react/react.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="bower_components/react/JSXTransformer.js" type="text/javascript" charset="utf-8"></script>
	<script src="EventBus.js" type="text/javascript" charset="utf-8"></script>
	
	<script src="app.js" type="text/jsx" charset="utf-8"></script>
	
</head>
<body>
	<div id="app">
	</div>	

	<script type="text/javascript">
		(function(){
			var draggedElement = null;
			var container = document.getElementById("dragContainer");
			function eleMouseDown (e){
				var target = e.target;
				if(target && target.className == "draggable"){
					draggedElement = target;
					draggedElement.style.color = "red";
				}
				document.addEventListener ("mousemove" , eleMouseMove , false);
			}

			function eleMouseMove (e) {
	            var pX = e.pageX,
	                pY = e.pageY;

	            e.preventDefault();
	            if (!draggedElement) {
	                return;
	            }

	            var dragLeft = dragContainer.offsetLeft,
	            dragRight = dragContainer.offsetWidth - draggedElement.clientWidth;
	            dragBottom = dragContainer.offsetHeight + dragContainer.offsetTop - draggedElement.clientHeight;
	            dragTop = dragContainer.offsetTop;
	            
	            if((pX >= dragLeft && pX <= dragRight) && (pY >= dragTop && pY <=  dragBottom)){
		          	draggedElement.style.position = "fixed";
		            draggedElement.style.top = pY + 'px';
		            draggedElement.style.left = pX + 'px';
	            }else{
	            	return;
	            }

	            document.addEventListener ("mouseup" , eleMouseUp , false);
	        }

	        function eleMouseUp(e)
	        {
	            if (draggedElement != null)
	            {
	                document.onmousemove = null;
	                document.onselectstart = null;

	                draggedElement.style.color = "";
	                draggedElement = null;
	            }
	        }
			document.addEventListener ("mousedown" , eleMouseDown , false);
	        
		})();
	</script>
</body>
</html>